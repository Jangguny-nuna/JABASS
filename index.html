<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Boom Boom Bass</title>
  <style>
    @font-face {
      font-family: 'DungGeunMo';
      src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2207@1.0/DungGeunMo.woff') format('woff');
      font-weight: normal;
      font-style: normal;
    }

    body {
      background-color: #000;
      color: #fff;
      font-family: 'DungGeunMo', sans-serif;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-height: 100vh;
      text-align: center;
    }

    h1 {
      font-size: 1.8rem;
      margin: 2rem 0 1rem;
    }

    #noteDisplay {
      font-size: 5rem;
      font-weight: bold;
      margin: 0.5rem 0;
      color: #00ffff;
      font-family: sans-serif;
    }

    .string-label {
      font-size: 2rem;
      color: #00ffff;
      font-weight: bold;
      font-family: sans-serif;
    }

    .timer-label {
      font-size: 1.2rem;
      color: #ffd700;
      font-weight: bold;
      font-family: sans-serif;
      margin-bottom: 0.5rem;
    }

    .menu button, .type-menu button, .mode-menu button, #pauseBtn, #startBtn {
      font-family: 'DungGeunMo';
      background-color: #333;
      color: #fff;
      border: 1px solid #777;
      padding: 0.4rem 0.7rem;
      border-radius: 6px;
      cursor: pointer;
    }

    .menu button.active,
    .type-menu button.active {
      background-color: #00aaff;
      color: #000;
    }

    .settings {
      display: flex;
      flex-direction: row;
      gap: 10px;
      flex-wrap: wrap;
      justify-content: center;
      margin-bottom: 1rem;
    }

    input[type="number"] {
      font-family: 'DungGeunMo';
      width: 60px;
      background-color: #333;
      color: #fff;
      border: 1px solid #777;
      padding: 0.4rem;
      border-radius: 6px;
    }

    select {
      font-family: 'DungGeunMo';
      background-color: #333;
      color: #fff;
      border: 1px solid #777;
      padding: 0.4rem;
      border-radius: 6px;
    }

    button.active {
      background-color: #00aaff;
      color: #000;
    }

    #pauseBtn.paused {
      background-color: #555;
    }

    @media (max-width: 600px) {
      #noteDisplay {
        font-size: 2.8rem;
      }
      .string-label {
        font-size: 1.4rem;
      }
    }

    .type-menu {
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
      justify-content: center;
      margin-bottom: 1rem;
    }

    .footer {
      font-size: 0.8rem;
      color: #999;
      margin-top: 2rem;
    }
.menu-btn {
  font-family: 'DungGeunMo';
  background-color: #333;
  color: #fff;
  border: 1px solid #777;
  padding: 0.4rem 0.7rem;
  border-radius: 6px;
  cursor: pointer;
  height: 2.2rem;          /* ë²„íŠ¼ ë†’ì´ í†µì¼ */
  line-height: 1.2rem;     /* í…ìŠ¤íŠ¸ ì„¸ë¡œ ì •ë ¬ ë³´ì • */
  display: inline-flex;
  align-items: center;
  justify-content: center;
}
.menu-btn:hover {
  background-color: #00aaff;
  color: #000;
}
  </style>
</head>
<body>
  <h1 style="font-size: 1.2rem; margin-top: 1rem;">ğŸ¸</h1>
  <h1>ğŸ€BASS ì§€íŒ ì •ë³µí•˜ê¸°!ğŸ€</h1>

  <div class="settings" id="settingsPanel">
    <select onchange="setMode(this.value)" id="modeSelect">
      <option value="chord">7th Chord</option>
      <option value="note" selected>Note</option>
    </select>

    <div>
    <button class="menu-btn" onclick="adjustInterval(-1)">-</button>
<span id="intervalValue">5</span>ì´ˆ
<button class="menu-btn" onclick="adjustInterval(1)">+</button>
    </div>

    <button id="pauseBtn" onclick="togglePause()">||</button>
    <button id="startBtn" onclick="begin()">ì‹œì‘í•˜ê¸°</button>
  </div>

  <div class="string-label" id="stringLabel"></div>
  <div id="noteDisplay"></div>
  <div class="timer-label" id="timerLabel"></div>

  <div class="type-menu" id="typeMenu"></div>
  <div class="type-menu" id="stringMenu"></div>
  <div class="type-menu" id="chordMenu"></div>




  <div class="footer">made by. PJA ğŸ¸</div>

  <script>
    let intervalId;
    let isPaused = false;
    let intervalSec = 5;
    let remainingTime = intervalSec;
    let started = false;

    const noteTypes = ['#', 'b'];
    const chordTypes = ['M7', 'm7', '7', 'dim7', 'm7b5'];

    function adjustInterval(val) {
      intervalSec = Math.max(1, intervalSec + val);
      document.getElementById("intervalValue").textContent = intervalSec;
      remainingTime = intervalSec;
    }

    function togglePause() {
  isPaused = !isPaused;
  document.getElementById("pauseBtn").classList.toggle("paused", isPaused);
  document.getElementById("pauseBtn").textContent = isPaused ? "â–¶" : "||";
}

    function setMode(mode) {
      renderMenus(mode);
    }

    function begin() {
      if (!started) {
        started = true;
        renderMenus(document.getElementById("modeSelect").value);
        clearInterval(intervalId);
        showNext();
        intervalId = setInterval(() => {
          if (!isPaused) {
            remainingTime--;
            document.getElementById("timerLabel").textContent = `${remainingTime}ì´ˆ ë‚¨ìŒ`;
            if (remainingTime <= 0) {
              showNext();
              remainingTime = intervalSec;
            }
          }
        }, 1000);
      }
    }

    function renderMenus(mode) {
      document.getElementById("typeMenu").innerHTML = '';
      document.getElementById("stringMenu").innerHTML = '';
      document.getElementById("chordMenu").innerHTML = '';

      if (mode === 'note') {
        noteTypes.forEach(type => {
          const btn = document.createElement('button');
          btn.textContent = type;
          btn.onclick = () => btn.classList.toggle('active');
          document.getElementById("typeMenu").appendChild(btn);
        });

      ['4í˜„', '5í˜„', '6í˜„'].forEach(label => {
  const btn = document.createElement('button');
  btn.textContent = label;
  btn.onclick = () => {
    // ëª¨ë“  ë²„íŠ¼ì—ì„œ 'active' ì œê±°
    document.querySelectorAll('#stringMenu button').forEach(b => b.classList.remove('active'));
    
    // í´ë¦­í•œ ë²„íŠ¼ë§Œ 'active' ì ìš©
    btn.classList.add('active');
  };
  document.getElementById("stringMenu").appendChild(btn);
});

      } else if (mode === 'chord') {
        chordTypes.forEach(type => {
          const btn = document.createElement('button');
          btn.textContent = type;
          btn.classList.add('active');
          btn.onclick = () => btn.classList.toggle('active');
          document.getElementById("chordMenu").appendChild(btn);
        });
      }
    }

    function showNext() {
      const mode = document.getElementById("modeSelect").value;
      const baseNotes = ['C', 'D', 'E', 'F', 'G', 'A', 'B'];
      let notes = [...baseNotes];

      const sharpActive = document.querySelector('#typeMenu button:nth-child(1)')?.classList.contains('active');
      const flatActive = document.querySelector('#typeMenu button:nth-child(2)')?.classList.contains('active');

      baseNotes.forEach(n => {
        notes.push(n);               
        if (sharpActive) notes.push(n + '#'); 
        if (flatActive) notes.push(n + 'b'); 
      });

      if (mode === "note") {
        const stringBtns = Array.from(document.querySelectorAll('#stringMenu button.active'));
        const selectedStrings = stringBtns.map(btn => btn.textContent);
        let stringRange = [];

        if (selectedStrings.includes('4í˜„')) stringRange.push(...['1ë²ˆ', '2ë²ˆ', '3ë²ˆ', '4ë²ˆ']);
        if (selectedStrings.includes('5í˜„')) stringRange.push(...['1ë²ˆ', '2ë²ˆ', '3ë²ˆ', '4ë²ˆ', '5ë²ˆ']);
        if (selectedStrings.includes('6í˜„')) stringRange.push(...['1ë²ˆ', '2ë²ˆ', '3ë²ˆ', '4ë²ˆ', '5ë²ˆ', '6ë²ˆ']);

        const randNote = notes[Math.floor(Math.random() * notes.length)];

        if (stringRange.length === 0) {
          document.getElementById("stringLabel").textContent = '';
          document.getElementById("noteDisplay").textContent = `${randNote}`;
        } else {
          const randString = stringRange[Math.floor(Math.random() * stringRange.length)];
          const stringNum = randString.split(' ')[0];
          document.getElementById("noteDisplay").textContent = `${stringNum}, ${randNote}`;
          document.getElementById("stringLabel").textContent = '';
        }
      } else {
        const activeTypes = Array.from(document.querySelectorAll('#chordMenu button.active')).map(b => b.textContent);
        if (activeTypes.length === 0) return;
        const randChord = baseNotes[Math.floor(Math.random() * baseNotes.length)];
        const randType = activeTypes[Math.floor(Math.random() * activeTypes.length)];
        const displayChord = randChord + randType;
        document.getElementById("noteDisplay").textContent = displayChord;
        document.getElementById("stringLabel").textContent = '';
      }
      document.getElementById("timerLabel").textContent = `${intervalSec}ì´ˆ ë‚¨ìŒ`;
    }

document.addEventListener('keydown', function(e) {
  // ìŠ¤í˜ì´ìŠ¤ë°”(ê³µë°±í‚¤) ê°ì§€
  if (e.code === 'Space') {
    // ë²„íŠ¼ í´ë¦­ê³¼ ë™ì¼í•˜ê²Œ togglePause ì‹¤í–‰
    togglePause();
    // ìŠ¤í¬ë¡¤ ë“± ê¸°ë³¸ ë™ì‘ ë°©ì§€
    e.preventDefault();
  }
});
  </script>
</body>
</html>
